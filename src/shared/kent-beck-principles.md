# Kent Beck純正TDD原則 & XP実践ガイド

## 🔄 TDDの3つのルール（Kent Beck, "Test-Driven Development by Example"）

### 1. 失敗するテストを書くまで、プロダクションコードを書いてはならない

- テストファースト厳守
- Red 状態の確認が必須

### 2. コンパイルが通らない、または失敗するテストを書いてはならない

- テストが正確に失敗することを確認
- テストコード自体の品質保証

### 3. 現在失敗しているテストを通す以上のプロダクションコードを書いてはならない

- 最小限の実装
- 過剰な設計の防止

## 🎯 Kent Beck三大戦略

### 1. Fake It（偽装実装）

**「恥ずかしいほどシンプルなハードコーディングから始める」**

```javascript
// 最初のテスト
test('should return 4 when adding 2 and 2', () => {
  expect(add(2, 2)).toBe(4);
});

// Fake It実装
function add(a, b) {
  return 4; // 完全にハードコード
}
```

**適用時期**:
- 実装方法が不明確な場合（60%以上で使用）
- 複雑なビジネスロジックの場合
- 設計について確信がない場合

### 2. Triangulation（三角測量）

**「2つ目のテストで一般化を強制する」**

```javascript
// 2つ目のテスト追加でハードコードを破る
test('should return 5 when adding 2 and 3', () => {
  expect(add(2, 3)).toBe(5);
});

// Triangulationによる一般化
function add(a, b) {
  return a + b; // ようやく正しい実装
}
```

**適用時期**:
- ハードコードが存在する状態
- 一般化の方向性が見えた時
- 設計の抽象化が必要な時

### 3. Obvious Implementation（自明な実装）

**「実装が明白な場合のみ、最初から正しく書く」**

```javascript
// 明らかにシンプルな場合のみ
function square(x) {
  return x * x; // 数学的に自明
}
```

**適用時期**:
- 実装が数学的に自明
- 1 行で完結する処理
- **注意**: 確信がない場合は Fake It を使用

## 🏗️ "Make it work, make it right, make it fast"

### 1. Make it work（動かす）

- とにかく動作するコードを書く
- 設計の美しさは後回し
- テストが通ることが最優先

### 2. Make it right（正しくする）

- リファクタリングで構造改善
- 重複コードの除去
- 命名の改善

### 3. Make it fast（速くする）

- パフォーマンス最適化
- 最後の段階で実施
- プロファイリング結果に基づく

## 🎯 Tidy First原則（Kent Beck著書より）

### 構造的変更と振る舞いの変更を分離

```bash
# 振る舞いの変更
git commit -m "[BEHAVIOR] Add login functionality"

# 構造的変更（別コミット）
git commit -m "[STRUCTURE] Extract authentication helper"
```

**重要**: 混ぜてはいけない
- BEHAVIOR コミット: 新機能、バグ修正
- STRUCTURE コミット: リファクタリング、整理

## 🚀 Kent Beck XP 12のプラクティス

### 1. 計画ゲーム

- ユーザーストーリーによる要求定義
- 短いイテレーション（1-3 週間）

### 2. 小さなリリース

- 頻繁な本番リリース
- ユーザーフィードバックの早期取得

### 3. メタファー

- システム全体の共通理解
- チーム内での概念統一

### 4. シンプルな設計

- YAGNI（You Aren't Gonna Need It）
- 今必要な機能のみ実装

### 5. テストファースト開発

- TDD 原則の厳格な適用
- 全機能の自動テスト化

### 6. リファクタリング

- 継続的なコード改善
- 設計の進化的向上

### 7. ペアプログラミング

- 2 人 1 組での開発
- 知識共有と品質向上

### 8. 集団所有

- コードの共同責任
- 誰でも任意のコードを修正可能

### 9. 継続的統合

- 頻繁なコード統合
- 早期の問題発見

### 10. 週40時間労働

- 持続可能な開発ペース
- オーバーワークの回避

### 11. 顧客常駐

- 開発チームと顧客の密接な連携
- 継続的なフィードバック

### 12. コーディング標準

- チーム統一のコーディングスタイル
- 可読性の向上

## 🧠 Kent Beck設計哲学

### "TDDは設計手法である"

- テストが設計を駆動
- API の使いやすさが自然に向上
- 複雑性の早期発見

### "シンプリシティ"

- 最も単純な解決策を選択
- 複雑性の後回し
- 必要になってから実装

### "コミュニケーション"

- コードは人間が読むもの
- 意図の明確な表現
- チーム内の知識共有

### "フィードバック"

- 短いサイクルでの確認
- 早期の問題発見
- 継続的な改善

### "勇気"

- 必要な変更を恐れない
- 既存コードの大胆な改善
- 失敗から学ぶ姿勢

## 🎯 実践ガイドライン

### 日々のTDD実践

1. **朝の確認**:
   - 全テストが通っているか？
   - 昨日の実装に問題はないか？

2. **開発中**:
   - 必ずテストから始める
   - Red-Green-Refactor サイクルを守る
   - 小さなステップで進む

3. **終了時**:
   - 全テストが通っている状態で終了
   - 次の作業の準備（TODO 残し等）

### チーム開発での実践

1. **ペアプログラミング**:
   - 運転手（タイピング）と航海士（レビュー）
   - 定期的な役割交代
   - 知識の共有促進

2. **継続的統合**:
   - 頻繁なコード統合（最低日次）
   - 統合時の全テスト実行
   - 問題の早期発見

3. **集団所有**:
   - 誰でも任意のコードを修正
   - コードレビューの実施
   - 品質の共同責任

## 📚 Kent Beck推奨リソース

### 必読書籍

- "Test-Driven Development by Example" - TDD の原典
- "Extreme Programming Explained" - XP 原則の詳解
- "Implementation Patterns" - コーディング哲学
- "Tidy First?" - 構造改善の手法

### 核心メッセージ

**Kent Beck**: "私はプログラマーです。私は恐れています。恐れが私を TDD に向かわせるのです。"

TDD は恐れを管理し、自信を持ってコードを変更するための手法である。

---

**注意**: この文書は Kent Beck の実際の著書と発言に基づいています。偽の引用や存在しない概念は含まれていません。
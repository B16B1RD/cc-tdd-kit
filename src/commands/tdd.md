---
description: "Kent Beck純正TDD開発 - テストファースト厳守とアジャイル原則準拠"
argument-hint: "作りたいものを説明してください（例: テトリスゲーム）"
allowed-tools: ["Write", "Read", "LS", "WebSearch", "Bash"]
---

# Kent Beck純正TDD開発

要望: $ARGUMENTS

## 🎯 真のTDD哲学（Kent Beck）

**"TDDは設計手法である"** - Kent Beck, "Test-Driven Development by Example"

### TDDの3つのルール
1. **失敗するテストを書くまで、プロダクションコードを書いてはならない**
2. **コンパイルが通らない、または失敗するテストを書いてはならない**  
3. **現在失敗しているテストを通す以上のプロダクションコードを書いてはならない**

## 指示

以下の**Kent Beck純正TDD原則**で開発を開始してください：

### 🚀 Phase 1: プロジェクト初期化とTDD環境構築

#### 1. TDD開発環境の初期化

**真のTDD環境を構築**してください：

```bash
/tdd:init [project-type]
```

**これにより以下が実行されます**:
- テストフレームワークの確認・セットアップ
- TDD専用ディレクトリ構造作成
- Git初期化とignore設定
- 品質ゲートの確認

#### 2. 最小限のテストから開始

**Kent Beck原則**: 「最小の失敗するテストから始める」

以下のいずれかでテストファースト開発を開始：

**a) 具体的機能が決まっている場合**:
```bash
/tdd:run [具体的な機能名]
# 例: /tdd:run add-numbers
# 例: /tdd:run move-block  
# 例: /tdd:run user-login
```

**b) 要望から機能を検討したい場合**:
```bash
/tdd:story $ARGUMENTS
```

### 🔄 Phase 2: 厳格なTDDサイクル実行

#### Red-Green-Refactorの厳守

**各機能実装で以下サイクルを必ず実行**:

1. **🔴 RED**: 失敗するテストを書く
2. **🟢 GREEN**: 最小実装でテストを通す  
3. **🔵 REFACTOR**: 構造改善（振る舞いは変えない）

#### Kent Beck三大戦略の適用

**戦略選択ガイド**:
- **不明確な実装** → Fake It戦略（ハードコーディングから）
- **2つ目のテスト** → Triangulation戦略（一般化強制）
- **自明な実装** → Obvious Implementation戦略（慎重に使用）

### 🎯 Phase 3: 継続的品質確保

#### 品質ゲートの実施

**各実装後に必ず確認**:

```bash
# テスト実行
npm test -- --watchAll=false --forceExit

# 品質チェック  
npm run lint
npm run typecheck  # TypeScriptの場合

# 動作確認
npm run dev  # または適切な実行コマンド
```

#### Tidy Firstコミット規則

**振る舞いと構造を分離**:
```bash
# 新機能実装後
git commit -m "[BEHAVIOR] Add [機能名]: テストファースト実装"

# リファクタリング後  
git commit -m "[STRUCTURE] [機能名]: 構造改善と可読性向上"
```

### 📋 Phase 4: アジャイル価値実現

#### 継続的フィードバックループ

**機能完成後の確認**:

1. **動作デモ**: 実際にユーザーが使える状態か？
2. **価値確認**: ユーザーにとって価値があるか？
3. **次の優先度**: 次に重要な機能は何か？
4. **改善点**: 現在の実装で改善すべき点は？

#### アジャイル原則の実践

**継続的な改善サイクル**:
```
実装 → デモ → フィードバック → 適応 → 実装...
```

## 🎯 開発完了時の確認

### ✅ TDD原則遵守チェック

**以下がすべて満たされているか確認**:

- [ ] **テストファースト**: すべての機能にテストが先行
- [ ] **Red-Green-Refactor**: 各機能でサイクル完了
- [ ] **Kent Beck戦略**: 適切な実装戦略を選択
- [ ] **品質ゲート**: テスト・lint・動作確認すべて通過
- [ ] **Tidy First**: BEHAVIORとSTRUCTUREコミット分離

### ✅ アジャイル価値実現チェック

- [ ] **動くソフトウェア**: ユーザーが実際に使用可能
- [ ] **顧客価値**: ユーザーの問題を解決
- [ ] **継続的改善**: フィードバックに基づく適応
- [ ] **シンプルな設計**: 不要な複雑性を排除

## 🚀 次のステップ選択

**開発完了後の選択肢**:

### 1. **継続開発** - 新機能追加
```bash
/tdd:story [次に追加したい機能]
```

### 2. **品質向上** - リファクタリング強化  
```bash
/tdd:run [改善したい既存機能]
```

### 3. **レビュー実施** - 開発プロセス振り返り
```bash
/tdd:review
```

### 4. **プロジェクト状況確認**
```bash
/tdd:status
```

## 🧠 Kent Beck智慧の実践

### 恐れの管理
**Kent Beck**: "私はプログラマーです。私は恐れています。恐れが私をTDDに向かわせるのです。"

TDDは以下の恐れを管理します：
- コード変更による既存機能の破壊への恐れ
- 設計の複雑化への恐れ  
- デバッグの困難さへの恐れ
- リリース時の不具合への恐れ

### 設計の駆動
**"テストがコードの設計を駆動する"**

- テストが先にAPIを定義
- 使いやすいインターフェースが自然に出現
- 複雑性が早期に発見される
- シンプルな設計が促進される

### XP価値の実現
- **コミュニケーション**: 明確なテストによる意図の表現
- **シンプリシティ**: 最小限の実装から開始
- **フィードバック**: 短いサイクルでの確認
- **勇気**: 自信を持ったリファクタリング

## 🎉 真のTDD開発開始

```text
🎯 Kent Beck純正TDD開発の準備完了！

💡 TDD哲学の理解:
- テストファースト厳守
- 設計駆動の開発手法
- 恐れの管理システム

🔄 実践サイクル:
- Red → Green → Refactor
- Kent Beck三大戦略適用
- 継続的品質確保

🚀 開発開始コマンド:

具体的機能の実装:
/tdd:run [機能名]

要望からストーリー作成:  
/tdd:story $ARGUMENTS

環境初期化（未実施の場合）:
/tdd:init
```

## ⚠️ アンチパターンの回避

### 避けるべき偽TDD
- ❌ テスト後付け（Test After Development）
- ❌ 複数テスト同時作成
- ❌ 過剰な前準備設計
- ❌ 時間ベースの機械的開発

### 真のTDDの特徴
- ✅ テストファースト厳守
- ✅ 最小ステップでの進行
- ✅ 継続的リファクタリング
- ✅ 品質組み込み型開発

**Kent Beck純正TDD**で、恐れを管理し、自信を持ってコードを進化させましょう。
---
allowed-tools:
  - Task
description: "TDD開発を即座に開始する統合コマンド - Kent Beck流完全フィードバックループ"
argument-hint: "作りたいものを詳しく説明してください（簡潔でも詳細でも構いません）"
---

# TDD クイックスタート

**段階的に考えます：**

Kent Beck 流の完全なフィードバックループでTDD開発を自動実行します。

要望: $ARGUMENTS

## 🕐 日付認識の能動的確認

まず現在の日付を正確に取得します：

`現在年=$(date +%Y)` で現在年を確認し、最新情報で開発を進めます。

## Phase 1: 初期セットアップと最初のイテレーション

以下のカスタムスラッシュコマンドを**Task toolで順次実行**：

### Step 1: ユーザーストーリー作成と技術選定

Task toolで `/tdd:story $ARGUMENTS` を実行し、完了まで待機：
- 要件分析（5つのなぜ）
- プロジェクトタイプ判定（web-app/api-server/cli-tool）
- 動的技術スタック選択（最新{現在年}情報）
- project-config.json 作成

### Step 2: 開発環境構築

Task toolで `/tdd:init` を実行し、完了まで待機：
- プロジェクト設定読み込み
- 選定された技術スタックベースの環境構築
- 言語別CLAUDE.md生成
- Git初期化

### Step 3: イテレーション計画

Task toolで `/tdd:plan 1` を実行し、完了まで待機：
- 90分イテレーション設計
- ストーリー分割と優先順位付け
- TDD実行計画作成

### Step 4: TDD実行開始

Task toolで `/tdd:run` を実行し、完了まで待機：
- Kent Beck TDDサイクル開始
- Red→Green→Refactor実践
- 必須ゲートによる品質確保

## Phase 2: レビューと継続判断

### Step 5: イテレーションレビュー

Task toolで `/tdd:review 1` を実行し、完了まで待機：
- 実装品質の分析
- Kent Beck原則への準拠確認
- 改善点とフィードバックの収集
- 次ステップの推奨事項提示

## Phase 3: 継続サイクル

レビュー完了後、ユーザーに継続意思を確認し、選択に応じて以下を自動実行：

## 🎯 イテレーション完了！次のステップ選択

プロジェクトの現在状態を確認し、次のアクションを選択してください：

### 選択肢一覧：

**1. 継続開発** 🚀
   - 次のイテレーション計画を作成
   - 新機能の追加（レベル進行、音楽、エフェクトなど）

**2. 機能追加** ➕
   - 新しい機能のストーリーを追加
   - 要件を詳しく聞いて実装計画を作成

**3. 機能改善** 🔧
   - 既存機能の改善点・問題点を収集
   - バグ修正や使い勝手の向上

**4. 完了** ✅  
   - 現在の状態でプロジェクト終了
   - 最終的な成果物の確認

あなたの選択: [1/2/3/4]

**選択に応じた自動実行:**

### 1. 継続開発を選択した場合
Task toolで以下を順次実行：
- `/tdd:plan 2` （次のイテレーション計画）
- `/tdd:run` （TDD実行）
- `/tdd:review 2` （レビュー）

### 2. 機能追加を選択した場合
Task toolで以下を順次実行：
- `/tdd:story [新機能詳細]` （新機能ストーリー作成）
- 継続フロー（plan → run → review）

### 3. 機能改善を選択した場合
以下のフローで改善を実施：
- **Step 1**: 詳細な改善点収集（下記質問フォーム）
- **Step 2**: Task toolで `/tdd:story [改善版要件]` を実行
- **Step 3**: 継続フロー（plan → run → review）
- **Step 4**: 改善完了後の動作確認と次ステップ案内

### 4. 完了を選択した場合
プロジェクト完了報告とサマリー表示

## 🔧 機能改善選択時の詳細収集

「3. 機能改善」を選択した場合、段階的な質問で改善点を収集：

### Phase 1: 改善対象の特定

```text
🔧 機能改善モード

まず最初に教えてください：

**改善したい機能は何ですか？**

（例：テトロミノの落下速度、キーボード操作、画面表示、音響効果など）

具体的な機能名をお答えください。
```

**回答受信後、Phase 2に進む**

### Phase 2: 問題点の詳細化

```text
ありがとうございます。次に教えてください：

**現在の [選択された機能] の何が問題ですか？**

具体的にどのような不具合や不便さがありますか？
```

**回答受信後、Phase 3に進む**

### Phase 3: 改善方法の確認

```text
問題を理解しました。続いて：

**どのように改善したいですか？**

理想的な動作や望ましい状態を教えてください。
```

**回答受信後、Phase 4に進む**

### Phase 4: 優先度の確認

```text
改善内容を確認できました。最後に：

**この改善の優先度はどの程度ですか？**

- **高**: すぐに修正が必要（基本機能に支障）
- **中**: できるだけ早く改善したい（使い勝手に影響）  
- **低**: 余裕があるときに改善（あると便利）

選択してください: [高/中/低]
```

**全回答完了後、改善ストーリーを作成**

## ✅ 改善完了時の案内テンプレート

機能改善が完了した際は、以下の形式で案内：

```text
## ✅ 改善が完了しました！

### 📋 修正内容：
- [具体的な修正点1] - [修正理由]
- [具体的な修正点2] - [修正理由]

### 🎯 次のステップ：
1. **まず修正結果を確認してください**
   - プロジェクトを実行して動作確認
   - 改善点が解決されたか検証

2. **確認後、問題の解決状況をお知らせください**
   - 改善された場合：次のアクション選択へ
   - まだ問題がある場合：追加の改善を実施

3. **次のアクションを選択**
   - さらなる改善点があれば機能改善を継続
   - 他の機能追加に移る場合は機能追加を選択
   - 開発を続ける場合は継続開発を選択

あなたの確認結果をお聞かせください。
```

## 🔍 自動検証プロトコル

### 各ステップ完了確認

**必須確認事項:**
- ✅ コマンド実行がエラーなく完了
- ✅ 期待するファイルが `.claude/agile-artifacts/` 配下に作成
- ✅ Git コミットが正常に実行される
- ✅ 次のステップに必要な情報が準備完了

**エラー時の対処:**
- コマンド失敗時は詳細エラー情報を表示
- 必須ファイルが作成されない場合は再実行を提案  
- Git エラー時は状態確認と修復手順を提示
- 各ステップで問題が発生した場合は実行を中断し、解決方法をユーザーに提示

**継続判定:**
各ステップ完了時に以下を確認してから次に進む：
1. 実行結果の妥当性検証
2. 必要ファイルの存在確認
3. Git状態の健全性チェック  
4. ユーザーへの進捗報告

XP原則に基づく即座のフィードバック、頻繁な顧客接触、継続的なコミュニケーション、レトロスペクティブを自動化。

# ユーザーストーリー v1.0

**プロジェクト**: 本格的テトリスゲーム（単体HTMLファイル版）
**作成日**: 2025-08-01
**技術スタック**: HTML5 Canvas + Vanilla JavaScript + CSS3（単体ファイル）
**イテレーション単位**: フィーチャー（2-4時間）

## Story 1: MVP Feature - 現代テトリス標準ゲームプレイ機能

**ストーリー**:
As a ゲームプレイヤー
I want 現代テトリスの標準機能を全て使って本格的にプレイしたい
So that 上級者も初心者も満足できる質の高いゲーム体験を得られる

**フィーチャー内容** (4-5時間で完成):
- [ ] **ゲームボード描画** - 10x20のグリッド表示、境界線、次のピース表示エリア
- [ ] **テトリミノ生成システム** - 7種類のピース、7-bag方式のランダム生成
- [ ] **ゴーストピース表示** - 半透明での落下位置予測表示（ユーザビリティ必須）
- [ ] **テトリミノ操作** - 移動（左右下）、回転（SRS準拠）、ハードドロップ
- [ ] **ホールド機能** - テトリミノ一時保管（Hold key: C）、戦略的プレイ支援
- [ ] **衝突判定システム** - ボード境界、固定ピース、底面検出、SRS回転判定
- [ ] **ライン消去システム** - 完成ライン検出、消去アニメーション、落下処理
- [ ] **T-spin基本判定** - T字ピースの特殊回転認識、スコアボーナス
- [ ] **現代的得点計算** - ライン数、T-spin、コンボシステム、レベル進行
- [ ] **ゲーム状態管理** - ゲームオーバー検出、開始・停止制御
- [ ] **統合テスト** - 現代テトリス標準の全機能が滑らかに動作

**受け入れ基準**:
- [ ] GIVEN ゲーム開始 WHEN 5分間プレイ THEN 上級者・初心者ともに満足する体験が得られる
- [ ] GIVEN 上級者プレイ WHEN ホールド・T-spin使用 THEN 戦略的で深いプレイが可能
- [ ] GIVEN 初心者プレイ WHEN ゴーストピース表示 THEN 落下位置が直感的に理解できる
- [ ] GIVEN テトリミノ操作 WHEN 全ての現代標準操作実行 THEN 期待通りに動作する
- [ ] GIVEN ライン完成 WHEN 複数ライン・T-spin THEN 正確にスコア計算・表示される
- [ ] GIVEN 友人に見せる WHEN ゲームプレイ THEN 「本格的」と評価される品質

**優先度**: 🔥 CRITICAL (MVP)
**工数見積**: 4-5時間（現代標準機能開発 + 統合テスト）

## Story 2: Core Feature - データ永続化システム

**ストーリー**:
As a ユーザー
I want ゲームデータが自動保存される
So that 中断・再開や記録保持ができる

**フィーチャー内容** (2-3時間で完成):
- [ ] **スコア保存** - ハイスコア、セッション記録
- [ ] **ゲーム状態保存** - 進行中ゲームの中断・再開
- [ ] **設定保存** - キー設定、音量、表示設定
- [ ] **自動復旧システム** - ブラウザクラッシュ時の状態復元
- [ ] **統計データ** - プレイ時間、総ライン数、平均スコア

**受け入れ基準**:
- [ ] GIVEN ゲーム中断 WHEN ブラウザ再開 THEN 状態が復元される
- [ ] GIVEN ハイスコア更新 WHEN ゲーム終了 THEN 自動保存される
- [ ] GIVEN 設定変更 WHEN 次回起動 THEN 設定が保持される

**優先度**: 🟡 HIGH
**工数見積**: 2-3時間

## Story 3: Core Feature - レスポンシブ対応システム

**ストーリー**:
As a ユーザー
I want どのデバイスでも快適に遊べる
So that 環境を選ばずゲームを楽しめる

**フィーチャー内容** (2-3時間で完成):
- [ ] **画面サイズ対応** - 異なる解像度での最適表示
- [ ] **キー設定システム** - カスタマイズ可能な操作設定
- [ ] **パフォーマンス最適化** - 60fps安定動作、メモリ効率化
- [ ] **タッチ操作対応** - モバイルデバイスでの操作
- [ ] **アクセシビリティ** - 色覚補助、操作ガイド

**受け入れ基準**:
- [ ] GIVEN 異なる画面サイズ WHEN ゲーム表示 THEN 適切にスケーリングされる
- [ ] GIVEN パフォーマンステスト WHEN 長時間プレイ THEN 60fps安定動作する
- [ ] GIVEN タッチデバイス WHEN 操作実行 THEN 直感的に操作できる

**優先度**: 🟡 HIGH  
**工数見積**: 2-3時間

## Story 4: Enhancement Feature - 視覚・音響効果システム

**ストーリー**:
As a プレイヤー
I want 迫力のある視覚・音響効果を体験したい
So that より没入感のあるゲーム体験を得られる

**フィーチャー内容** (3-4時間で完成):
- [ ] **パーティクルエフェクト** - ライン消去時のエフェクト
- [ ] **効果音システム** - ピース移動、回転、ライン消去音
- [ ] **BGMシステム** - レベル進行に応じた音楽変化
- [ ] **滑らかアニメーション** - テトリミノ落下、回転の補間
- [ ] **テーマシステム** - 複数の視覚テーマ、色設定

**受け入れ基準**:
- [ ] GIVEN ライン消去 WHEN エフェクト再生 THEN 視覚的満足感が得られる
- [ ] GIVEN 音響設定 WHEN 音量調整 THEN 適切に音量制御される
- [ ] GIVEN アニメーション WHEN ピース操作 THEN 滑らかな動作表示される

**優先度**: 🟢 MEDIUM
**工数見積**: 3-4時間

## Story 5: Enhancement Feature - 共有性向上システム

**ストーリー**:
As a ユーザー
I want 友人と簡単にゲームを共有したい
So that みんなで楽しめる

**フィーチャー内容** (2-3時間で完成):
- [ ] **単体ファイル最適化** - CSS・JS・音声ファイルの完全統合
- [ ] **統計表示システム** - 詳細なプレイ統計、グラフ表示
- [ ] **記録機能** - ゲームリプレイ、ベストプレイ保存
- [ ] **共有用機能** - スコア画像生成、プレイ動画出力
- [ ] **軽量化最適化** - ファイルサイズ最小化、読み込み高速化

**受け入れ基準**:
- [ ] GIVEN ファイル共有 WHEN 他の環境で実行 THEN 完全に動作する
- [ ] GIVEN 統計表示 WHEN データ確認 THEN 詳細な分析情報が得られる
- [ ] GIVEN ファイルサイズ WHEN 最適化後 THEN 2MB以下になる

**優先度**: 🟢 MEDIUM
**工数見積**: 2-3時間

---

## 学習記録エリア

### 即座学習記録（Phase完了時に更新）

[Phase完了時に自動追記されます]

---

## 計画修正履歴

### 初期計画 (2025-08-01)
- 合計工数見積: 12-17時間
- 優先度: Story 1 → Story 2 → Story 3 → Story 4 → Story 5
- リスク要因: Canvas APIの学習コスト、音響システムの複雑性

### MVP検証による修正 (2025-08-01)
**修正理由**: Phase 3.6 MVP検証ゲートでFAIL判定
- **問題**: 現代テトリス標準機能の欠落（ホールド、ゴーストピース、T-spin等）
- **修正内容**: Story 1に現代テトリス必須機能を追加
- **工数調整**: Story 1の工数 3-4時間 → 4-5時間（+1時間）
- **合計工数見積**: 12-17時間 → 13-18時間
- **品質向上**: 上級者・初心者両方が満足する本格的品質を確保

**Kent Beck「勇気」の実践**: 
- 計画の不備を正直に受け入れ
- ユーザー価値を最優先に修正
- 工数増加を恐れず品質確保
# イテレーション計画 v1.0

**プロジェクト**: 本格的テトリスゲーム（HTML単体ファイル）
**計画日**: 2025-08-01
**イテレーション期間**: 2-3時間（フィーチャー単位）

## Iteration 1: 基本ゲームプレイフィーチャー実装

**目標**: Story 1の統合機能群を完成させる
**フィーチャー**: 基本テトリスゲームプレイ

### Phase 1: ゲームボード・描画システム実装 (30-40分)
**機能**: ゲームボード描画とテトリミノ基本表示
- [ ] 失敗するテスト作成: ボード描画・グリッド表示 (5分)
- [ ] Fake It実装: HTML5 Canvas基本設定 (15分)
- [ ] テトリミノ形状定義と描画関数実装 (15分)
- [ ] 基本リファクタリング: 描画関数の整理 (5分)
- [ ] コミット: [BEHAVIOR] Add game board and tetrimino rendering

### Phase 2: テトリミノ操作システム実装 (30-40分)
**機能**: ピース移動・回転・落下制御
- [ ] テスト追加: キーボード入力とピース移動 (5分)
- [ ] Triangulation実装: 移動・回転ロジック (20分)
- [ ] ボード境界・衝突判定との統合 (10分)
- [ ] コミット: [BEHAVIOR] Add tetrimino movement and rotation

### Phase 3: ライン消去・得点システム実装 (30-40分)
**機能**: 行完成判定とブロック消去・スコア計算
- [ ] テスト追加: ライン完成判定とブロック消去 (5分)
- [ ] 実装: 消去ロジックと上部ブロック落下処理 (20分)
- [ ] 得点計算とスコア表示の統合 (10分)
- [ ] コミット: [BEHAVIOR] Add line clearing and scoring system

### Phase 4: ゲームループ・状態管理実装 (30-40分)
**機能**: ゲーム開始・進行・終了制御
- [ ] End-to-Endテスト: 完全なゲームフロー (10分)
- [ ] ゲームループ・タイマー制御実装 (15分)
- [ ] ゲームオーバー判定と処理 (10分)
- [ ] コミット: [BEHAVIOR] Complete basic tetris game loop

### Phase 5: 統合・ポリッシュ・単体ファイル化 (30-60分)
**機能**: 最終的な統合とHTMLファイル単体化
- [ ] 全機能の統合テスト・バグ修正 (15分)
- [ ] CSS・JavaScript のHTML内埋め込み (15分)
- [ ] パフォーマンス最適化・起動速度確認 (15分)
- [ ] 最終動作確認: HTMLダブルクリック→ゲーム完走 (15分)
- [ ] コミット: [STRUCTURE] Create standalone HTML tetris game

**成功基準**:
- [ ] HTMLファイルダブルクリックで3秒以内に起動
- [ ] 矢印キー・スペースキーで直感的操作
- [ ] ライン消去・スコア表示・ゲームオーバーが正常動作
- [ ] 5分間継続してプレイ可能
- [ ] 外部依存なしで完全動作

**次のイテレーション候補**:
- Story 2: ゲーム進行管理フィーチャー（スコア永続化・レベルシステム）
- Story 3: ユーザー体験向上フィーチャー（エフェクト・サウンド）

## Kent Beck三大戦略の適用計画

**Fake It戦略** (推奨使用60%):
- ゲームボード描画（最初は固定配置）
- テトリミノ形状（ハードコード定義）
- スコア計算（固定値から開始）

**Triangulation戦略**:
- ピース移動（複数方向で一般化）
- 衝突判定（様々なケースで検証）
- ライン消去（複数ライン同時処理）

**Obvious Implementation戦略**:
- 数学的計算（座標変換・回転行列）
- 単純な状態フラグ管理

## 学習ループ統合ポイント

**各Phase完了時の必須作業**:
1. **機能動作確認** - 該当機能が期待通り動作
2. **Phase 3.6実行** - フィードバック収集（5分）
3. **ストーリー更新** - 進捗・発見事項の反映（5分）
4. **計画見直し** - 残り時間・優先度の調整

**Phase 3.6フィードバックポイント**:
- 実装の困難度は想定通りか？
- パフォーマンス・操作感に問題ないか？
- ユーザー体験として満足できるか？
- 工数見積もりは適切だったか？
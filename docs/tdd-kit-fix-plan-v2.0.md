# TDD Kit修正計画書 v2.0 - 要求工学アプローチ

**作成日**: 2025-07-31  
**作成者**: Claude Code  
**対象**: 要求分析エンジンの導入による根本的修正  
**前版からの変更**: キーワードマッチングから要求工学手法への転換

## 🎯 修正の核心：要求分析の革命

### v1.0の根本的問題

**従来アプローチ（ダメな例）**:
```markdown
❌ 「ユーザーが指定した実行形態を最優先で確認してください」
❌ "HTMLダブルクリック" → 単体HTMLファイル（キーワードマッチング）
❌ 表面的な技術選択の修正のみ
```

**問題点**:
- ユーザーの真の目的・背景を理解しない
- つたない表現から本質を読み取れない
- 他の表現パターン（「簡単に実行したい」「インストール不要で」等）に対応不可
- 要求の背景にある制約や動機を見落とす

### v2.0の革新的アプローチ

**要求工学手法の統合**:
- **5W1H + 制約分析**: 要求の背景と動機の深掘り
- **Jobs-to-be-Done**: ユーザーが解決したい本質的課題の特定
- **体験逆算設計**: 理想体験から技術選択を逆算
- **多様な表現対応**: 様々な要求パターンの統一的理解

## 📚 要求工学理論の適用

### 1. Jobs-to-be-Done (JTBD) フレームワーク

**理論**: Clayton Christensen「顧客は商品を雇って仕事をさせる」

**適用例**:
```
要求: "HTMLファイルのダブルクリックで手軽に遊べる本格的なテトリスゲーム"

JTBD分析:
- メインジョブ: 「短時間で気分転換したい」
- 関連ジョブ: 「複雑な設定を避けたい」
- 感情的ジョブ: 「すぐに楽しみたい」「達成感を得たい」
- 社会的ジョブ: 「他人に簡単に共有したい」

競合: YouTube動画、スマホゲーム、他のブラウザゲーム
差別化: ゼロ摩擦でのアクセス、プログラマー向けの親しみやすさ
```

### 2. 5W1H + 制約理論

**理論**: システム思考における制約特定と解決

**適用例**:
```
Who: プログラミング学習者、開発者の息抜き
What: ゼロ摩擦でアクセスできるゲーム体験
When: 短い空き時間（5-15分）
Where: 様々なPC環境（会社、自宅、外出先）  
Why: 手軽な気分転換、達成感の獲得
How: ファイル一つで完結する体験

制約分析:
- 技術制約: 環境差異、インストール権限なし
- 時間制約: 即座の起動、短時間プレイ
- 認知制約: シンプルな操作、学習コストゼロ
```

### 3. 体験逆算設計 (Experience Back-casting)

**理論**: デザイン思考における理想体験からの逆算

**適用例**:
```
理想体験: 「ファイルをダブルクリック → 即座にゲーム開始 → 楽しくプレイ」

摩擦ポイント特定:
1. インストール・設定 → 単体HTMLファイル
2. サーバー起動 → 外部依存ゼロ
3. ロード時間 → 軽量化・インライン化
4. 操作学習 → 直感的UI・説明不要

技術選択の逆算:
- 単体HTMLファイル（配布・起動の摩擦ゼロ）
- インラインCSS/JS（外部依存ゼロ）
- Vanilla JavaScript（軽量・高速）
- Canvas API（ゲーム描画最適）
```

## 🔧 具体的修正内容

### Phase 1: 要求分析エンジンの統合

**現状のPhase 1**:
```markdown
### 1.1 要望内容の詳細分析
**要望を詳しく分析**してください：
1. **作りたいもの**: $ARGUMENTS
2. **プロジェクトタイプを判定**してください：...
```

**修正後のPhase 1**:
```markdown
## 🔍 Phase 1: 要求の本質分析（Requirements Engineering）

### 1.1 5W1H + 制約分析

**ユーザーの真の目的と制約を分析**してください：

**Who（誰が）**: 
- ユーザーの技術レベルを推定してください（初心者/中級者/上級者）
- 想定される使用環境を分析してください（個人/チーム/学習目的）

**What（何を）**: 
- 表面的な要求文の背後にある真のニーズを特定してください
- 「本当に解決したい問題」を見つけてください

**When/Where（いつ・どこで）**:
- 使用タイミング（継続利用/一時利用/学習期間）
- 実行環境の制約（様々なマシン/特定環境/モバイル対応）

**Why（なぜ）**:
- この要求をする根本的な動機を推定してください
- 解決したい課題・得たい価値を特定してください

**How（どのように）**:
- ユーザーが理想とする体験・操作方法を想像してください

**制約分析**:
- 技術的制約（スキル、環境、リソース、権限）
- 時間的制約（開発時間、学習コスト、使用時間）  
- 配布制約（インストール、依存関係、アクセス性、共有方法）

### 1.2 Jobs-to-be-Done分析

**ユーザーが「雇いたい」ジョブを特定**してください：

**メインジョブ**: 
- ユーザーが根本的に達成したいこと
- 解決したい本質的な課題

**関連ジョブ**: 
- 付随的に解決したい課題
- 避けたい作業・トラブル

**感情的ジョブ**: 
- 得たい感情（楽しさ、達成感、安心感）
- 避けたい感情（イライラ、不安、退屈）

**社会的ジョブ**: 
- 他者との関係で得たい価値（共有、評価、貢献）

**競合分析**: 
- 同じジョブを解決する他の手段との差別化ポイント

### 1.3 理想体験からの逆算設計

**摩擦ゼロの体験設計**:

1. **理想体験の定義**: 
   - ユーザーが望む最終的な体験シナリオ
   - 「最高の場合、どうなるか？」

2. **摩擦ポイントの特定**: 
   - 理想体験を阻む障害・面倒な作業
   - 「何が邪魔になるか？」

3. **技術選択の逆算**: 
   - 摩擦を最小化する技術スタック選択
   - 「どうすれば摩擦を除去できるか？」

4. **MVP再定義**: 
   - 理想体験の最小実現版
   - 「最小限で理想体験を実現するには？」

### 1.4 分析結果の統合と技術判定

**分析結果から技術スタックを決定**:

上記の分析結果を統合して、最適な技術選択を行ってください：

**体験重視型（摩擦ゼロ重視）**:
- ゼロインストール → 単体HTMLファイル
- 即座起動 → サーバーレス実行
- 環境非依存 → ブラウザ標準技術のみ

**開発効率型（機能重視）**:
- 高機能 → モダンフレームワーク
- 拡張性 → コンポーネント分割
- 保守性 → 開発サーバー + ビルドツール

**学習・実験型（理解重視）**:
- 透明性 → シンプルな技術スタック
- カスタマイズ性 → 設定可能な構造
- 段階的成長 → 拡張しやすい設計
```

## 📋 要求パターン対応例

### パターン1: 手軽さ重視

**様々な表現**:
- "HTMLファイルのダブルクリックで遊べる"
- "簡単に実行したい"
- "インストール不要で使いたい"
- "ファイル一つで動かしたい"

**分析結果**:
- メインジョブ: ゼロ摩擦でのアクセス
- 制約: インストール・設定の回避
- 技術選択: 単体HTMLファイル + インライン化

### パターン2: 学習・実験重視

**様々な表現**:
- "コードを理解しながら作りたい"
- "段階的に機能を追加したい"
- "カスタマイズしやすくしたい"

**分析結果**:
- メインジョブ: 理解しながらの成長体験
- 制約: 複雑すぎない、透明性重視
- 技術選択: Vanilla JS + 段階的構造

### パターン3: 本格的開発

**様々な表現**:
- "プロダクション品質で作りたい"
- "チームで開発したい"
- "拡張性を重視したい"

**分析結果**:
- メインジョブ: 高品質・拡張可能なシステム
- 制約: 保守性、テスト容易性
- 技術選択: モダンフレームワーク + フルスタック

## 🧪 検証・テスト計画

### Phase 1: 要求分析精度テスト

**テストケース**:
1. **テトリス要求**: "HTMLダブルクリックで遊べるテトリス"
2. **曖昧な要求**: "簡単に使えるアプリが欲しい"
3. **技術的要求**: "REST APIサーバーを作りたい"
4. **学習要求**: "プログラミングを覚えながら何か作りたい"

**期待結果**:
- 各要求で適切な5W1H分析実行
- Jobs-to-be-Done の正確な特定
- 技術選択の妥当性確認

### Phase 2: 実装品質テスト

**確認項目**:
1. **テトリス**: 単体HTMLファイルでの実行確認
2. **API**: 適切な開発環境構築確認
3. **学習**: 理解しやすい構造での実装確認

### Phase 3: ユーザー満足度テスト

**評価基準**:
- 要求と成果物の合致度
- ユーザーの期待充足度
- 追加要求の発生頻度

## 🎯 期待される効果

### 直接的効果

1. **真のニーズ対応**: 表面的要求を超えた本質的解決
2. **多様な表現対応**: 様々な要求パターンの統一的理解
3. **適応性向上**: 未知の要求にも柔軟対応
4. **満足度向上**: ユーザーが本当に望む体験の提供

### 間接的効果

1. **要求品質向上**: より良い要求定義の促進
2. **開発効率化**: 的確な技術選択による開発スピード向上
3. **学習効果**: 要求分析スキルの向上
4. **イノベーション**: 新しい解決手法の発見

## 📅 実装スケジュール

### Week 1: 要求分析エンジン実装
- Day 1-2: Phase 1の完全書き換え
- Day 3-4: 分析手法の統合・テスト
- Day 5: ドキュメント整備

### Week 2: 検証・改善
- Day 1-3: 各種要求パターンでのテスト
- Day 4-5: 問題点修正・最適化

### Week 3: リリース準備
- Day 1-2: 品質保証・最終テスト
- Day 3: ドキュメント更新
- Day 4-5: リリース・フィードバック収集

## 🚀 革新的価値

この修正により、TDDキットは単なる開発環境構築ツールから、**ユーザーの真のニーズを理解する知的システム**へと進化します。

**Before**: キーワードマッチング的な単純判定  
**After**: 人間の要求分析専門家レベルの深い理解

これにより、どのような表現の要求でも、背景にある本質的ニーズを正確に捉え、最適な技術選択と実装方針を提供できるようになります。

---

**この修正は、要求工学の理論的基盤の上に構築された、真に知的なTDDキットの実現を目指します。**